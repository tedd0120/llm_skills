## 上下文
当前组织树已具备折叠、缩放、拖拽、搜索高亮能力，但页面宽度与交互细节仍偏粗放。目标是在不改变数据结构与主流程的前提下，优化布局密度和可用性。

## 目标 / 非目标
- 目标：
  - 降低默认横向占用，减少初始浏览拖拽成本。
  - 提供 hover 祖先链信息，帮助快速理解上下游关系。
  - 解决文本选择与画布拖动冲突。
  - 统一为 iOS 极简视觉风格。
- 非目标：
  - 不改变树构建算法（仍基于 `superior -> name`）。
  - 不新增后端接口或网络请求。
  - 不重构为第三方图形库。

## 决策
- 决策 1：通过收紧现有布局常量实现紧凑化
  - 调整 `NODE_W/NODE_H/H_STEP/V_STEP/ROOT_GAP_UNITS/SUBTREE_GAP_UNITS`，不引入新布局引擎。
- 决策 2：使用前端定时悬停（1 秒）显示祖先链
  - 基于 `parent_id` 向上回溯到根节点，按“根 -> ... -> 父级”顺序展示“姓名-部门”。
  - 离开节点或移动到其他节点时取消/重置计时器。
- 决策 3：将画布拖动限制为背景区域触发
  - 在节点与文本区域优先保留点击/选择语义；文本选中时禁止进入平移逻辑。
- 决策 4：采用 iOS 极简样式
  - 使用 Apple 系字体栈与低饱和中性色，弱阴影和高圆角，保持信息密度与可读性平衡。

## 风险 / 权衡
- 风险：布局过紧可能降低可读性
  - 缓解：限制最小节点尺寸并保留文本截断策略。
- 风险：hover 提示可能遮挡节点
  - 缓解：提示框采用轻量浮层并在视口边缘自动避让。
- 风险：拖动触发范围收窄后，部分用户感知“难拖动”
  - 缓解：保留画布背景拖动能力，并在提示文字中明确交互方式。

## 验证策略
- 静态校验：`py_compile`。
- 行为验证：
  - 节点 hover 超过 1 秒出现祖先链提示；不足 1 秒不出现。
  - 节点文本可框选，框选过程画布不移动。
  - 画布背景仍可拖动，滚轮缩放正常。
  - 页面视觉符合 iOS 极简风格与字体要求。
