# group-members-org-tree-skill 规范

## 目的
定义“成员 JSON -> 组织架构树 HTML”能力的行为规范。
该能力最初由归档变更 `add-teams-org-tree-html-skill` 引入，并于 2026-02-10 合并到 `.agent/skills/teams-group-members` 统一维护。
## 需求
### 需求：从成员 JSON 生成组织架构树 HTML

系统**必须**支持读取已抓取的成员 JSON 列表，并生成可本地查看的组织架构树 HTML 文件。

#### 场景：读取已有 JSON 生成 HTML

- 当用户提供成员 JSON 输入文件路径
- 系统**必须**解析成员列表并输出 HTML 文件
- 系统**禁止**在该流程中调用群成员抓取 API

### 需求：组织树按 superior 关系构建

系统**必须**以成员字段 `superior` 作为父子关系依据构建组织树，并**必须**保留多个根节点展示。

#### 场景：按 superior 关联上下级

- 当成员 A 的 `superior` 等于成员 B 的 `name`
- 系统**必须**将 A 作为 B 的下级节点展示

#### 场景：无上级或无法匹配上级时保留多根

- 当成员 `superior` 为空，或未匹配到任何成员 `name`
- 系统**必须**将该成员作为根层节点展示
- 系统**禁止**强制合并为单一虚拟根节点

### 需求：页面支持搜索与高亮

HTML 页面**必须**提供简单搜索能力，并对命中节点高亮显示。

#### 场景：搜索命中姓名/工号/部门

- 当用户输入关键字
- 系统**必须**在姓名、工号、部门字段中进行包含匹配
- 命中节点**必须**高亮，且其祖先路径**必须**可见

### 需求：页面展示抓取日期与总人数

HTML 页面**必须**展示数据抓取日期与总人数。

#### 场景：显式传入抓取日期

- 当 CLI 提供抓取日期参数
- 页面**必须**显示该日期
- 页面**必须**显示 JSON 解析后的总人数

#### 场景：未显式传入抓取日期

- 当 CLI 未提供抓取日期参数
- 页面**必须**回退显示输入 JSON 文件的最后修改日期

### 需求：根节点点击仅展开一层下级

HTML 页面**必须**以画布式决策树展示组织结构，并支持节点点击展开直属下级。

#### 场景：首屏仅显示根节点

- 当页面首次加载
- 系统**必须**仅显示根节点（`superior` 为空或无法匹配上级）并横向排布

#### 场景：点击节点展开直属下级

- 当用户点击某个可展开节点
- 系统**必须**在该节点下方展示其直属下级
- 系统**必须**保持更深层级默认折叠，除非用户继续点击展开

### 需求：画布支持拖动与缩放

组织树画布**必须**支持用户拖动和平滑缩放。

#### 场景：鼠标滚轮缩放

- 当用户在画布上滚轮操作
- 系统**必须**按缩放比例放大/缩小画布内容

#### 场景：鼠标拖动画布

- 当用户按住画布拖动
- 系统**必须**平移画布视图

### 需求：保留搜索高亮与头部信息

系统**必须**保留搜索高亮、抓取日期、总人数展示。

#### 场景：搜索命中并高亮

- 当用户输入关键字
- 系统**必须**按姓名/工号/部门匹配并高亮命中节点
- 系统**必须**自动展开命中节点的祖先路径

#### 场景：头部信息展示

- 当页面渲染完成
- 系统**必须**展示数据抓取日期与总人数
